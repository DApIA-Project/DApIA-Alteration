name: Copy artifacts to .m2 folder

on: push

jobs:
  copy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Upload artifacts
        uses: actions/upload-artifact@v2
        with:
          name: tools-atc
          path: packages/alteration/libs/com/fdit/tools/tools-atc

      - name: Upload artifacts
        uses: actions/upload-artifact@v2
        with:
          name: testTools-atc
          path: packages/alteration/libs/com/fdit/tools/testTools-atc

      - name: Download artifacts and copy to .m2
        uses: actions/download-artifact@v2
        with:
          name: tools
        run: |
          mkdir -p $HOME/.m2/repository/com/fdit/tools/
          tar xzf ${{ steps.download.outputs.download_path }} -C $HOME/.m2/repository/com/fdit/tools/

      - name: Download artifacts and copy to .m2
        uses: actions/download-artifact@v2
        with:
          name: testTools
        run: |
          mkdir -p $HOME/.m2/repository/com/fdit/tools/
          tar xzf ${{ steps.download.outputs.download_path }} -C $HOME/.m2/repository/com/fdit/tools/